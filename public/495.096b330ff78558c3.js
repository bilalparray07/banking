"use strict";(self.webpackChunkloans_ui=self.webpackChunkloans_ui||[]).push([[495],{1495:(A,c,u)=>{u.r(c),u.d(c,{CustomersModule:()=>Z});var d=u(6895),m=u(2045);class p{}class g{constructor(){this.modalTitle="",this.displayStyle="none",this.editMode=!1,this.customerList=[],this.customerObject=new p}}var e=u(8256),h=u(529);let C=(()=>{class s{constructor(t){this.http=t,this.apiUrl="https://banking-cdy3.vercel.app/app/v1/customers"}addAuthorizationHeaders(){const t=sessionStorage.getItem("token");let o=new h.WM;return t&&(o=o.set("Authorization",`Bearer ${t}`)),o}createCustomer(t){const o=this.addAuthorizationHeaders();return this.http.post(this.apiUrl,t,{headers:o})}updateCustomer(t,o){const n=this.addAuthorizationHeaders();return this.http.put(`${this.apiUrl}/${t}`,o,{headers:n})}deleteCustomer(t){const o=this.addAuthorizationHeaders();return this.http.delete(`${this.apiUrl}/${t}`,{headers:o})}getCustomerDetails(t){const o=this.addAuthorizationHeaders();return this.http.get(`${this.apiUrl}/${t}`,{headers:o})}getCustomers(){const t=this.addAuthorizationHeaders();return this.http.get(this.apiUrl,{headers:t})}uploadProfilePicture(t,o){const n=this.addAuthorizationHeaders(),r=new FormData;return r.append("profilePicture",o),this.http.post(`${this.apiUrl}/upload/${t}`,r,{headers:n})}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(h.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var l=u(433);function v(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"button",26),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.openAddEditModal(r._id))}),e._uU(16,"Edit"),e.qZA(),e._uU(17,"\xa0\xa0 "),e.TgZ(18,"button",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteCustomer(r._id))}),e._uU(19,"Delete"),e.qZA()()()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.firstName),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.emailAddress),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(2),e.Oqu(e.xi3(11,6,t.dob,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.address)}}const M=function(s){return{display:s}},b=[{path:"",component:(()=>{class s{constructor(t){this.customerService=t,this.viewModel=new g}ngOnInit(){this.loadCustomers()}closePopup(){this.viewModel.displayStyle="none"}openAddEditModal(t){null==t?(this.viewModel.editMode=!1,this.viewModel.customerObject=new p):(this.viewModel.editMode=!0,this.selectCustomer(t)),this.viewModel.displayStyle="block"}loadCustomers(){this.customerService.getCustomers().subscribe(t=>{this.viewModel.customerList=t})}selectCustomer(t){this.customerService.getCustomerDetails(t).subscribe(o=>{console.log("Customer details data:",o),this.viewModel.customerObject=o})}saveCustomer(){this.viewModel.customerObject._id?this.customerService.updateCustomer(this.viewModel.customerObject._id,this.viewModel.customerObject).subscribe(()=>{alert("Customer Updated SuccessFully!"),this.viewModel.displayStyle="none",this.loadCustomers()},o=>{console.error("Error updating customer:",o)}):this.customerService.createCustomer(this.viewModel.customerObject).subscribe(o=>{alert("Customer Added successfully!"),this.loadCustomers(),this.viewModel.displayStyle="none"},o=>{console.error("Error creating customer:",o)})}deleteCustomer(t){this.customerService.deleteCustomer(t).subscribe(()=>{this.loadCustomers(),alert("Customer deleted Successfully")})}uploadProfilePicture(t,o){const n=t.target.files[0];n&&this.customerService.uploadProfilePicture(o,n).subscribe(()=>{this.loadCustomers()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(C))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-customers"]],decls:82,vars:16,consts:[[1,"container"],[1,"row"],[1,"col-6"],[1,"col-6","text-end"],[1,"btn","btn-success",3,"click"],[1,"table"],[1,"text-center"],[4,"ngFor","ngForOf"],["tabindex","-1","role","dialog",1,"modal","expandIn",3,"ngStyle"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"col-lg-11","col-md-11","col-sm-11","col-11"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-lg-5","col-md-6","col-sm-12","col-12","mb-1"],[1,"text-danger","fs-5"],[1,"col-lg-7","col-md-6","col-sm-12","col-12","mb-1"],["type","text","required","required","placeholder","Enter Customer Name",1,"form-control",3,"ngModel","value","ngModelChange"],["type","text","required","required","placeholder","Enter LastNanme",1,"form-control",3,"ngModel","value","ngModelChange"],["type","text","required","required","placeholder","Enter Email Address",1,"form-control",3,"ngModel","value","ngModelChange"],["type","text","required","required","placeholder","Enter Phone Number",1,"form-control",3,"ngModel","value","ngModelChange"],["type","date","required","required","placeholder","Enter Phone Number",1,"form-control",3,"ngModel","value","ngModelChange"],["type","text","required","required","placeholder","Enter Permenant Address",1,"form-control",3,"ngModel","value","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Customers"),e.qZA()(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return o.openAddEditModal(null)}),e._uU(7,"Add Customer"),e.qZA()()(),e.TgZ(8,"table",5)(9,"thead")(10,"tr")(11,"th"),e._uU(12,"First Name"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Last Name"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Email"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Phone Number"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"D-O-B"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Address"),e.qZA(),e.TgZ(23,"th",6),e._uU(24,"Actions"),e.qZA()()(),e.TgZ(25,"tbody"),e.YNc(26,v,20,9,"tr",7),e.qZA()()(),e.TgZ(27,"div",8)(28,"div",9)(29,"div",10)(30,"div",11)(31,"div",12)(32,"h5"),e._uU(33," Add Customer "),e.qZA()(),e.TgZ(34,"button",13),e.NdJ("click",function(){return o.closePopup()}),e.qZA()(),e.TgZ(35,"div",14)(36,"div",1)(37,"div",15)(38,"label"),e._uU(39," Name "),e.TgZ(40,"span",16),e._uU(41,"*"),e.qZA()()(),e.TgZ(42,"div",17)(43,"input",18),e.NdJ("ngModelChange",function(r){return o.viewModel.customerObject.firstName=r}),e.qZA()(),e.TgZ(44,"div",15)(45,"label"),e._uU(46," Last Name "),e.TgZ(47,"span",16),e._uU(48,"*"),e.qZA()()(),e.TgZ(49,"div",17)(50,"input",19),e.NdJ("ngModelChange",function(r){return o.viewModel.customerObject.lastName=r}),e.qZA()(),e.TgZ(51,"div",15)(52,"label"),e._uU(53," Email "),e.TgZ(54,"span",16),e._uU(55,"*"),e.qZA()()(),e.TgZ(56,"div",17)(57,"input",20),e.NdJ("ngModelChange",function(r){return o.viewModel.customerObject.emailAddress=r}),e.qZA()(),e.TgZ(58,"div",15)(59,"label"),e._uU(60," Phone Number "),e.TgZ(61,"span",16),e._uU(62,"*"),e.qZA()()(),e.TgZ(63,"div",17)(64,"input",21),e.NdJ("ngModelChange",function(r){return o.viewModel.customerObject.phoneNumber=r}),e.qZA()(),e.TgZ(65,"div",15)(66,"label"),e._uU(67," D-O-B "),e.TgZ(68,"span",16),e._uU(69,"*"),e.qZA()()(),e.TgZ(70,"div",17)(71,"input",22),e.NdJ("ngModelChange",function(r){return o.viewModel.customerObject.dob=r}),e.qZA()(),e.TgZ(72,"div",15)(73,"label"),e._uU(74," Address "),e.TgZ(75,"span",16),e._uU(76,"*"),e.qZA()()(),e.TgZ(77,"div",17)(78,"input",23),e.NdJ("ngModelChange",function(r){return o.viewModel.customerObject.address=r}),e.qZA()()()(),e.TgZ(79,"div",24)(80,"button",25),e.NdJ("click",function(){return o.saveCustomer()}),e._uU(81,"Save me"),e.qZA()()()()()),2&t&&(e.xp6(26),e.Q6J("ngForOf",o.viewModel.customerList),e.xp6(1),e.Q6J("ngStyle",e.VKq(14,M,o.viewModel.displayStyle)),e.xp6(16),e.s9C("value",o.viewModel.customerObject.firstName),e.Q6J("ngModel",o.viewModel.customerObject.firstName),e.xp6(7),e.s9C("value",o.viewModel.customerObject.lastName),e.Q6J("ngModel",o.viewModel.customerObject.lastName),e.xp6(7),e.s9C("value",o.viewModel.customerObject.emailAddress),e.Q6J("ngModel",o.viewModel.customerObject.emailAddress),e.xp6(7),e.s9C("value",o.viewModel.customerObject.phoneNumber),e.Q6J("ngModel",o.viewModel.customerObject.phoneNumber),e.xp6(7),e.s9C("value",o.viewModel.customerObject.dob),e.Q6J("ngModel",o.viewModel.customerObject.dob),e.xp6(7),e.s9C("value",o.viewModel.customerObject.address),e.Q6J("ngModel",o.viewModel.customerObject.address))},dependencies:[d.sg,d.PC,l.Fj,l.JJ,l.Q7,l.On,d.uU]}),s})()}];let _=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m.Bz.forChild(b),m.Bz]}),s})(),Z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.ez,_,l.u5]}),s})()}}]);